/*
* videojs-ga - v0.4.2 - 2017-09-14
* Copyright (c) 2017 Michael Bensoussan
* Licensed MIT
*/
(function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};(a=videojs.registerPlugin||videojs.plugin)("ga",function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return null==a&&(a={}),c={},this.options_["data-setup"]&&(l=JSON.parse(this.options_["data-setup"]),l.ga&&(c=l.ga)),d=["loadedmetadata","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],i=a.eventsToTrack||c.eventsToTrack||d,o=a.percentsPlayedInterval||c.percentsPlayedInterval||10,g=a.eventCategory||c.eventCategory||"Video",h=a.eventLabel||c.eventLabel,a.debug=a.debug||!1,n=[],s=r=0,t=!1,k=function(){n=[],h||(h=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),b.call(i,"loadedmetadata")>=0&&u("loadedmetadata",!0)},v=function(){var a,c,d,e,f;for(a=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(a/c*100),d=f=0;99>=f;d=f+=o)e>=d&&b.call(n,d)<0&&(b.call(i,"start")>=0&&0===d&&e>0?u("start",!0):b.call(i,"percentsPlayed")>=0&&0!==e&&u("percent played",!0,d),e>0&&n.push(d));b.call(i,"seek")>=0&&(s=r,r=a,Math.abs(s-r)>1&&(t=!0,u("seek start",!1,s),u("seek end",!1,r)))},e=function(){u("end",!0)},p=function(){var a;a=Math.round(this.currentTime()),u("play",!0,a),t=!1},m=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||t||u("pause",!1,a)},w=function(){var a;a=this.muted()===!0?0:this.volume(),u("volume change",!1,a)},q=function(){u("resize - "+this.width()+"*"+this.height(),!0)},f=function(){var a;a=Math.round(this.currentTime()),u("error",!0,a)},j=function(){var a;a=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?u("enter fullscreen",!1,a):u("exit fullscreen",!1,a)},u=function(b,c,d){window.ga?ga("send","event",{eventCategory:g,eventAction:b,eventLabel:h,eventValue:d,nonInteraction:c}):window._gaq?_gaq.push(["_trackEvent",g,b,h,d,c]):a.debug&&console.log("Google Analytics not detected")},this.ready(function(){return this.on("loadedmetadata",k),this.on("timeupdate",v),b.call(i,"end")>=0&&this.on("ended",e),b.call(i,"play")>=0&&this.on("play",p),b.call(i,"pause")>=0&&this.on("pause",m),b.call(i,"volumeChange")>=0&&this.on("volumechange",w),b.call(i,"resize")>=0&&this.on("resize",q),b.call(i,"error")>=0&&this.on("error",f),b.call(i,"fullscreen")>=0?this.on("fullscreenchange",j):void 0}),{sendbeacon:u}})}).call(this);